!function(e,t){var n="0.1.3",r=[],o=function(){function n(){return null}function o(){}function u(e){var t=/^\s*<!\[CDATA\[([\s\S]*)\]\]>\s*$/,n=e.match(t);return n&&n[1]?n[1]:e}function a(t){var n=t.innerHTML||t.xml;return!n&&e.XMLSerializer&&(n=(new e.XMLSerializer).serializeToString(t),n=n.replace(/^\s*<[^>]*>|<\/[^>]*>\s*$/g,"")),n||""}function i(t){t&&(e.execScript||function(t){e.eval.call(e,t)})(t)}function c(e){var t=e.getAttribute("href");if(!t)return!1;var n,r=document.styleSheets,o=r.length;for(n=0;o>n;n++)if(r[n].href==t)return!0;return!1}function l(e){var t=e.getAttribute("src");if(!t)return!1;var n,r=document.getElementsByTagName("script"),o=r.length;for(n=0;o>n;n++)if(r[n].getAttribute("src")==t)return!0;return!1}function s(e){var t=e.getAttribute("data-wi-loadchk");if(!t)return!1;try{return i("!!("+t+")")}catch(n){return!1}}function d(e){if(e){var t=u(e),n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("style");r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n.appendChild(r),o("Style: "+t.substring(0,100))}}function f(e){var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t.appendChild(n),o("Link: "+e)}function m(e){var t=e.querySelectorAll('style, link[rel="stylesheet"], script');T=[];var n,r=t.length;for(n=0;r>n;n++){var o=t[n];switch(o.tagName.toLowerCase()){case"style":if(!s(o)){var u=o.firstChild;u&&d(u.textContent||u.nodeValue||"")}break;case"link":s(o)||c(o)||f(o.getAttribute("href"));break;case"script":s(o)||l(o)||T.push(o)}o.parentNode.removeChild(o)}}function p(){setTimeout(function(){var e=T[w];if(!e)return C();w++;var t=e.getAttribute("src");t?h(t):y(a(e))},0)}function h(e,t){var n=t||1e4,r=document.createElement("script"),u=!1,a=document.body||document.getElementsByTagName("body")[0]||document.documentElement;r.onreadystatechange=r.onload=function(t,n){u||!n&&r.readyState&&!/loaded|complete/.test(r.readyState)||(u=!0,n||o("Script: "+e),p()),r.onload=r.onreadystatechange=null},r.src=e,a.appendChild(r),setTimeout(function(){u||(v("Timeout: "+e),r.parentNode&&r.parentNode.removeChild(r),r.onload(null,!0))},n)}function y(e){if(e){var t=u(e);try{i(t),o("Eval: "+t.substring(0,100))}catch(n){v("Eval error: "+n.message+" ~~~ "+t.substring(0,100))}}p()}var g=function(){return e.console&&"function"==typeof e.console.log?function(){e.console.log.apply(e.console,arguments)}:e.opera&&"function"==typeof e.opera.postError?function(){e.opera.postError.apply(e.opera,arguments)}:function(){r.push(Array.prototype.join.call(arguments," "))}}(),v=g,b=function(){function t(e){return[e.hostname,e.port||("http:"===e.protocol?"80":"443"),e.protocol]}var n=t(e.location);return function(e){var r=document.createElement("a");r.href=e,r.href=r.href;var o=t(r);return o[0]==n[0]&&o[1]==n[1]&&o[2]==n[2]}}(),T=[],w=0,C=n;!function(){function r(n){var r,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,r=o.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(u){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||v("XML parse error: "+n.substring(0,100)),r}function u(){var e=new XMLHttpRequest;return"withCredentials"in e}function i(e,t){var n=d();null!==n&&(n.open("GET",e,!0),n.onerror=function(){v("HTML request error")},n.onload=function(){t(n.responseText)},n.send(null))}function c(e){return'<?xml version="1.0" encoding="UTF-8" ?><wm-xml xmlns:ws="https://wamer.net/stencils">\n'+(e&&"string"==typeof e?e.replace(/<!DOCTYPE[^>]*>/,""):"")+"\n</wm-xml>"}function l(){T>g&&(y(E[g]),g++)}var s=function(){var t="https:"===e.location.protocol?"https:":"http:",n="//query.yahooapis.com/v1/public/yql?q=",r=encodeURIComponent("select * from html where url = ")+"%27",o="%27"+encodeURIComponent(" and xpath=")+"%27/html%27";return function(e){return t+n+r+encodeURIComponent(e)+o}}(),d=n;e.XMLHttpRequest&&u()?d=function(){return new XMLHttpRequest}:e.XDomainRequest?d=function(){return new XDomainRequest}:v("CORS not supported");var f=function(e,t){var n=r(e);if(null!==n){m(n);var u=n.getElementsByTagName("body");if(u[0]){t.innerHTML=a(u[0]);for(var i=t.parentNode;t.hasChildNodes();)i.insertBefore(t.removeChild(t.firstChild),t);i.removeChild(t),o("Body injected OK")}else v("No body tag found");w=0,p()}},h="data-wi-src",y=function(e){var t=e.getAttribute(h),n=b(t),r=n?t:s(t);i(r,function(t){var r=n?c(t):t;f(r,e)})},g=0,T=0,E=[];C=l,setTimeout(function(){E=document.querySelectorAll("["+h+"]"),T=E.length,T&&l()},0)}()};o.version=n,o.log=r,o(),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=o:(e.wmHtmlInclude=o,"function"==typeof define&&define.amd&&define("wm-html-include",[],function(){return o}))}(window);